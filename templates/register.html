<!DOCTYPE html>
<html>
<head>
  <title>ToDoList</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="../static/css/style.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
  <style>
      body {
        background-color: #f5f9ff;
      }
    </style>
</head>
<body>
<div>
    <header class="d-flex flex-wrap   py-3 mb-4 border-bottom">
      <div class="head-button-left">
        <a href="https://bulkin228sich.github.io/todo/index.html" class="d-inline-flex link-body-emphasis text-decoration-none">
          <text x="0" y="20">ToDoList</text>
        </a>
      </div>

      <div class="head-button-right text-end">
       <a href="https://bulkin228sich.github.io/todo/templates/login.html"><button type="button" class="btn btn-outline-primary me-2">Войти</button></a>
        <a href="https://bulkin228sich.github.io/todo/templates/register.html"><button type="button" class="btn btn-primary">Регистрация</button></a>
      </div>
    </header>
  </div>

  <div class="container" style="width: 400px; margin: auto;">
    <h1>Регистрация</h1>
    <form id="registration-form">
        <label for="username">Имя пользователя:</label>
         <br>
        <input type="text" id="username" name="username" required>
        <br>
        <label for="password">Пароль:</label>
         <br>
        <input type="password" id="password" name="password" required>
        <br>
        <br>
        <input type="submit" value="Зарегистрироваться">
    </form>
 </div>
  <script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-firestore.js"></script>
 <script type="module">
   
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-app.js";
  import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-firestore.js";

  // Your web app's Firebase configuration
  const firebaseConfig = {
apiKey: "AIzaSyDslTfzea0KFaVHszP6Q8BPst6prF1obmY",
authDomain: "todolist-e24ca.firebaseapp.com",
projectId: "todolist-e24ca",
storageBucket: "todolist-e24ca.appspot.com",
messagingSenderId: "173648301613",
appId: "1:173648301613:web:28337caf368ff49aee72a4"
};

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // Получение формы регистрации
  const registrationForm = document.getElementById('registration-form');

  // Добавление обработчика события на отправку формы
  registrationForm.addEventListener('submit', (event) => {    
    const username = username.value;
    const password = password.value;
    debugger
    // Добавление нового пользователя в коллекцию 'user'
    setDoc(doc(db, 'todolist', 'user'), {
  name: username,
  password: password,
  task: ''
})
    .then(() => {
      console.log('Новый пользователь успешно добавлен в базу данных');
    })
    .catch((error) => {
      console.error('Ошибка при добавлении нового пользователя в базу данных:', error);
    });
  });
</script>
</body>
</html>
